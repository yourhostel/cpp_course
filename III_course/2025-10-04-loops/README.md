# Цикли, класифікація циклів

У мові C++ цикли дають можливість повторювати виконання певного блоку коду кілька разів. Вони зручні для обробки послідовностей даних, поступової зміни змінних чи організації повторюваних обчислень. Основні цикли в C++ - це `while`, `do…while`, класичний `for` та `range-based for`. Крім цих конструкцій, стандартна бібліотека містить алгоритми й інструменти з модулів `<algorithm>`, `<numeric>` та `<ranges>`, які виконують повторення неявно.

---
# Групи циклів у C++

### 1) Стандартні цикли (мовні конструкції)
- Вбудовано в мову, нічого підключати не треба.
- Класичні конструкції C++ ще з часів C:
    - `while` - перевірка умови перед входом.
    - `do … while` - перевірка умови після першої ітерації.
    - `for (ініц; умова; інкремент)` - цикл з лічильником і повним контролем.
    - `range-based for` (з C++11) - синтаксис для контейнерів.
- Best practice:
    - Використовувати `range-based for` для контейнерів.
    - Використовувати класичний `for` для числових ітерацій.
- Bad practice:
    - `while(true)` без контролю -> нескінченні цикли.

---

### 2) STL алгоритми (`<algorithm>`)
- `#include <algorithm>`
- Готові алгоритми, що замінюють ручні цикли:
    - `std::for_each`, `std::find`, `std::copy`, `std::transform`
    - `std::count_if`, `std::all_of`, `std::any_of`, `std::none_of`
- Best practice:
    - Використовувати замість «велосипедних» циклів.
    - Код стає декларативним: `std::find` зрозуміліше, ніж `for + if`.
- Bad practice:
    - Занадто складні лямбди -> втрачається читабельність.

---

### 3) Numeric алгоритми (`<numeric>`)
- `#include <numeric>`
- Математичні цикли для обчислень:
    - `std::accumulate`, `std::inner_product`, `std::partial_sum`
    - `std::exclusive_scan`, `std::inclusive_scan`, `std::transform_reduce`
    - `std::adjacent_difference`
- Best practice:
    - Використовувати для сум, добутків, префіксних сум.
    - Добре поєднуються з контейнерами STL.
- Bad practice:
    - Використовувати без розуміння асоціативності операцій у `scan`.
    - Заміняти ними найпростіші `for`, де це лише ускладнює код.

---

### 4) Ranges & Views (`<ranges>`)
- `#include <ranges>`
- Ліниві діапазони (C++20):
    - `std::views::iota` - генерація чисел.
    - `std::views::filter` - фільтрація.
    - `std::views::transform` - трансформація.
    - `std::views::take` / `std::views::drop` - обмеження діапазону.
- Best practice:
    - Комбінувати кілька views у пайплайни.
    - Використовувати для великих обчислень без копій.
- Bad practice:
    - Перетворювати код на "Haskell", занадто складні пайплайни.
    - Ігнорувати лінивість це помилки з життям об’єктів.

---

### 5) Корутини (C++20+)
- `#include <coroutine>`
- Новий синтаксис мови для асинхронності та генераторів:
    - `co_await` - очікування на awaitable.
    - `co_yield` - повернення значення з генератора.
    - `co_return` - завершення coroutine.
- Best practice:
    - Використовувати з бібліотеками (`cppcoro`, `asio`, `std::generator` у C++23).
    - Для асинхронного I/O, генераторів даних.
- Bad practice:
    - Використовувати напряму без бібліотек - багато ручної писанини.
    - Застосовувати для простих завдань замість звичайних циклів.

---

### 6) Low-level (`goto`)
- Вбудовано, нічого підключати не треба.
- Оператор стрибка «асемблерного стилю».
- **Best practice:**
    - Використовувати лише у виняткових випадках (наприклад, вихід із вкладених циклів).
- **Bad practice:**
    - Створювати "spaghetti code".
    - Замінювати `break`, `continue` або `return`.



| Назва циклу                  | Формат запису                                       | Чи є змінна (параметр)    | Тип параметра         | Як надається початкове значення | Як/ким змінюється значення           | Скільки разів виконується тіло | Наявність операторних дужок | Потрібна бібліотека / хедер |
|------------------------------|-----------------------------------------------------|---------------------------|-----------------------|---------------------------------|--------------------------------------|--------------------------------|-----------------------------|-----------------------------|
| **Стандартні**               |                                                     |                           |                       |                                 |                                      |                                |                             |                             |
| while                        | `while (умова) { ... }`                             | Немає обов’язкової        | Будь-який             | Умова перевіряється             | Неявно у тілі                        | 0…∞ разів                      | `{ }`                       | вбудовано                   |
| do … while                   | `do { ... } while (умова);`                         | Немає обов’язкової        | Будь-який             | Початковий стан                 | Неявно у тілі                        | 1…∞ разів                      | `{ }`                       | вбудовано                   |
| for (класичний)              | `for (ініц; умова; інкремент) { ... }`              | Є (лічильник)             | Будь-який (int часто) | Через ініціалізацію             | Інкремент/декремент                  | 0…∞ разів                      | `{ }`                       | вбудовано                   |
| range-based for              | `for (auto x : контейнер) { ... }`                  | Є (елемент колекції)      | Тип елемента          | Із контейнера                   | STL-ітератор                         | За кількістю елементів         | `{ }`                       | вбудовано                   |
| **\<algorithm\>**            |                                                     |                           |                       |                                 |                                      |                                |                             | `#include <algorithm>`      |
| for_each                     | `std::for_each(begin, end, f)`                      | Є (елемент)               | Тип елемента          | Діапазон                        | Алгоритм STL                         | За кількістю елементів         | Немає (функція)             | `<algorithm>`               |
| count_if                     | `std::count_if(begin, end, pred)`                   | Є (елемент)               | Тип елемента          | Діапазон                        | Алгоритм STL                         | Один прохід                    | Немає                       | `<algorithm>`               |
| all_of / any_of / none_of    | `std::all_of(begin, end, pred)`                     | Є (елемент)               | Тип елемента          | Діапазон                        | Алгоритм STL                         | Один прохід                    | Немає                       | `<algorithm>`               |
| find / find_if / find_if_not | `std::find(begin, end, val)`                        | Є (елемент)               | Тип елемента          | Діапазон                        | Алгоритм STL                         | До першого збігу               | Немає                       | `<algorithm>`               |
| copy / move                  | `std::copy(begin, end, out)`                        | Є (елемент)               | Тип елемента          | Діапазон                        | Алгоритм STL                         | За кількістю елементів         | Немає                       | `<algorithm>`               |
| transform                    | `std::transform(in1, in2, out, f)`                  | Є (елемент)               | Тип елемента          | Діапазон                        | Алгоритм STL                         | За кількістю елементів         | Немає                       | `<algorithm>`               |
| **\<ranges\>**               |                                                     |                           |                       |                                 |                                      |                                |                             | `#include <ranges>`         |
| ranges::for_each             | `std::ranges::for_each(rng, f)`                     | Є (елемент)               | Тип елемента          | Range                           | Range-ітератор                       | За кількістю елементів         | Немає                       | `<algorithm>` + `<ranges>`  |
| **\<views\>**                |                                                     |                           |                       |                                 |                                      |                                |                             | `#include <ranges>`         |
| iota                         | `for (auto i : std::views::iota(0, n))`             | Є (лічильник)             | int / довільний тип   | Генерується в iota              | Автоматично                          | n разів                        | `{ }`                       | `<ranges>`                  |
| transform                    | `for (auto v : rng \| std::views::transform(...))`  | Є (елемент)               | Виведений з виразу    | З контейнера + трансформація    | Автоматично                          | За кількістю елементів         | `{ }`                       | `<ranges>`                  |
| filter                       | `for (auto v : rng \| std::views::filter(pred))`    | Є (елемент)               | Тип елемента          | З контейнера + фільтрація       | Автоматично                          | Кількість після фільтрації     | `{ }`                       | `<ranges>`                  |
| take / drop                  | `for (auto v : rng \| std::views::take(5))`         | Є (елемент)               | Тип елемента          | З контейнера                    | Автоматично                          | До заданої межі                | `{ }`                       | `<ranges>`                  |
| **Корутини (C++20+)**        |                                                     |                           |                       |                                 |                                      |                                |                             | `#include <coroutine>`      |
| co_yield                     | `co_yield expr;`                                    | Є (значення)              | Будь-який             | Початковий виклик               | Awaiter/генератор                    | Поки yield викликається        | `{ }` / генератор           | `<coroutine>` + runtime     |
| co_await                     | `co_await task;`                                    | Є (awaiter)               | Awaitable type        | Повертається awaitable          | Планувальник                         | Залежить від задачі            | `{ }`                       | `<coroutine>`               |
| co_return                    | `co_return val;`                                    | Є (значення)              | Будь-який             | У функції coroutine             | Завершення                           | Один раз (кінець)              | `{ }`                       | `<coroutine>`               |
|                              |                                                     |                           |                       |                                 |                                      |                                |                             |                             |
| accumulate                   | `std::accumulate(begin, end, init)`                 | Є (елемент)               | Тип елемента          | Початкове `init`                | Через функцію (operator+ за замовч.) | За кількістю елементів         | Немає (функція)             | `<numeric>`                 |
| inner_product                | `std::inner_product(b1, e1, b2, init)`              | Є (елементи 2 діапазонів) | Тип елемента          | Початкове `init`                | Добуток + сума                       | За кількістю елементів         | Немає                       | `<numeric>`                 |
| partial_sum                  | `std::partial_sum(begin, end, out)`                 | Є (елемент)               | Тип елемента          | Перший елемент діапазону        | Додається до попередньої суми        | За кількістю елементів         | Немає                       | `<numeric>`                 |
| exclusive_scan (C++17)       | `std::exclusive_scan(begin, end, out, init)`        | Є (елемент)               | Тип елемента          | Початкове `init`                | Асоціативна операція                 | За кількістю елементів         | Немає                       | `<numeric>`                 |
| inclusive_scan (C++17)       | `std::inclusive_scan(begin, end, out)`              | Є (елемент)               | Тип елемента          | Перший елемент діапазону        | Асоціативна операція                 | За кількістю елементів         | Немає                       | `<numeric>`                 |
| transform_reduce (C++17)     | `std::transform_reduce(b1, e1, b2, init, op1, op2)` | Є (елемент)               | Тип елемента          | Початкове `init`                | Трансформація + редукція             | За кількістю елементів         | Немає                       | `<numeric>`                 |
| adjacent_difference          | `std::adjacent_difference(begin, end, out)`         | Є (елемент)               | Тип елемента          | Перший елемент діапазону        | Різниця між сусідніми                | За кількістю елементів         | Немає                       | `<numeric>`                 |
| **Low-level**                |                                                     |                           |                       |                                 |                                      |                                |                             |                             |
| goto                         | `label: ... goto label;`                            | Немає                     | -                     | Ручна передача                  | Програміст                           | залежить від умови             | Опційно                     | вбудовано                   |

